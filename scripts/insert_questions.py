import os
import sys
from pathlib import Path
from sqlalchemy import create_engine, Column, String, DateTime, ForeignKey, Boolean
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker, relationship
from datetime import datetime
from uuid import uuid4
from dotenv import load_dotenv

# âœ… æ·»åŠ  backend ç›®å½•åˆ° Python è·¯å¾„
CURRENT_DIR = Path(__file__).resolve().parent
BASE_DIR = CURRENT_DIR.parent
# print(BASE_DIR)
BACKEND_DIR = BASE_DIR / "backend"
sys.path.insert(0, str(BACKEND_DIR))

# âœ… åŠ è½½ç¯å¢ƒå˜é‡
load_dotenv(BACKEND_DIR / ".env.development")

# âœ… è·å–æ•°æ®åº“ URL
DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///./test.db")

# å¦‚æœä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„ SQLiteï¼Œç¡®ä¿æŒ‡å‘ backend ç›®å½•
if DATABASE_URL.startswith("sqlite:///./"):
    db_filename = DATABASE_URL.replace("sqlite:///./", "")
    DATABASE_PATH = BACKEND_DIR / db_filename
    DATABASE_URL = f"sqlite:///{DATABASE_PATH}"
    print(f"ğŸ“‚ æ•°æ®åº“è·¯å¾„: {DATABASE_PATH}")

# âœ… æ•°æ®åº“é…ç½®
Base = declarative_base()

connect_args = {}
if "sqlite" in DATABASE_URL:
    connect_args = {"check_same_thread": False}

engine = create_engine(DATABASE_URL, connect_args=connect_args)
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)


# âœ… é‡æ–°å®šä¹‰ Question æ¨¡å‹ï¼ˆä¸ main.py ä¿æŒä¸€è‡´ï¼‰
class Question(Base):
    __tablename__ = "questions"
    id = Column(String, primary_key=True, index=True, default=lambda: str(uuid4()))
    tag = Column(String)
    inspiring_words = Column(String)
    question_text = Column(String)
    created_by = Column(String, nullable=True)
    is_public = Column(Boolean, default=False)
    created_at = Column(DateTime, default=datetime.utcnow)


# ä½ å‡†å¤‡å¥½çš„é—®é¢˜æ•°æ®
questions_with_meta = [
    # 1ï¸âƒ£ è‡ªæˆ‘è®¤è¯†ä¸å†…åœ¨æ¢ç´¢
    {"question_text": "æˆ‘æœ€æ ¹æœ¬çš„æ¸´æœ›æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘å®³æ€•çš„æ˜¯ä»€ä¹ˆï¼Ÿ",
     "tag": "æ¸´æœ›/ææƒ§",
     "inspiring_words": "å¯ä»¥ä»ç‰©è´¨ã€æƒ…æ„Ÿã€ç²¾ç¥ä¸‰ä¸ªå±‚é¢å±•å¼€ï¼›å°è¯•å†™ä¸‹æœ€æç«¯çš„ç­”æ¡ˆï¼Œæ¯”å¦‚â€œæˆ‘å®³æ€•æ¯«æ— æ„ä¹‰çš„æ­»äº¡â€â€œæˆ‘æ¸´æœ›è¢«æ— æ¡ä»¶åœ°çˆ±â€ã€‚"},
    {"question_text": "å¦‚æœå®Œå…¨æ²¡æœ‰å¤–ç•Œè¯„ä»·ï¼Œæˆ‘æœ€æƒ³æˆä¸ºæ€æ ·çš„äººï¼Ÿ",
     "tag": "çœŸå®è‡ªæˆ‘",
     "inspiring_words": "æƒ³è±¡ä¸€ä¸ªæ²¡æœ‰å®¶åº­ã€æœ‹å‹ã€ç¤¾ä¼šæœŸå¾…çš„å­¤å²›ï¼Œä½ ä¼šå¦‚ä½•ç”Ÿæ´»ï¼Ÿ"},
    {"question_text": "æˆ‘åšå‡ºé‡è¦é€‰æ‹©æ—¶ï¼ŒçœŸæ­£é©±åŠ¨æˆ‘çš„å¾€å¾€æ˜¯ä»€ä¹ˆï¼šç†æ€§ã€æƒ…æ„Ÿã€ææƒ§è¿˜æ˜¯å¥½å¥‡ï¼Ÿ",
     "tag": "åŠ¨åŠ›æº",
     "inspiring_words": "å›é¡¾äººç”Ÿä¸­3ä¸ªé‡å¤§å†³å®šï¼Œæ‹†è§£å½“æ—¶çš„å¿ƒç†åŠ¨æœºã€‚"},
    {"question_text": "å“ªäº›äº‹æƒ…æœ€å®¹æ˜“è®©æˆ‘æ„¤æ€’ã€æ‚²ä¼¤æˆ–å–œæ‚¦ï¼Ÿè¿™äº›æƒ…ç»ªèƒŒåéšè—ç€æ€æ ·çš„ä»·å€¼è§‚ï¼Ÿ",
     "tag": "æƒ…ç»ªæ˜ å°„",
     "inspiring_words": "ä»æœ€è¿‘ä¸€æ¬¡å¼ºçƒˆæƒ…ç»ªå‡ºå‘ï¼Œè¿½é—®â€œä¸ºä»€ä¹ˆè¿™ä»¶äº‹è®©æˆ‘å¦‚æ­¤åœ¨æ„â€ã€‚"},
    {"question_text": "æˆ‘è®¤ä¸ºâ€œå–„â€çš„æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæ¥è‡ªå®¶åº­æ•™è‚²ã€ç¤¾ä¼šç¯å¢ƒè¿˜æ˜¯è‡ªä¸»é€‰æ‹©ï¼Ÿ",
     "tag": "å–„ä¸æ¶",
     "inspiring_words": "è¯•ç€å†™ä¸‹ä¸‰ä¸ªâ€œå–„â€çš„å…·ä½“ä¾‹å­ï¼Œè€Œä¸æ˜¯æŠ½è±¡æ¦‚å¿µã€‚"},
    {"question_text": "å¦‚æœå¿…é¡»åœ¨â€œè‡ªç”±â€â€œå®‰å…¨â€â€œçˆ±æƒ…â€â€œé‡‘é’±â€â€œæˆé•¿â€ä¹‹é—´åšä¼˜å…ˆæ’åºï¼Œæˆ‘ä¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ",
     "tag": "ä»·å€¼æ’åº",
     "inspiring_words": "ç”¨1â€“5çš„æ’åºå¹¶è§£é‡ŠåŸå› ï¼Œå¯ä»¥æ­ç¤ºæ½œåœ¨ä»·å€¼ä½“ç³»ã€‚"},
    {"question_text": "æˆ‘è¿˜æ˜¯è¿‡å»çš„æˆ‘å—ï¼Ÿå˜åŒ–ä¸­æœ‰å“ªäº›â€œæ ¸å¿ƒâ€ä¸€ç›´æ²¡æœ‰åŠ¨æ‘‡ï¼Ÿ",
     "tag": "è‡ªæˆ‘æŒç»­æ€§",
     "inspiring_words": "å›å¿†10å¹´å‰çš„è‡ªå·±ï¼Œå†™ä¸‹ä¸‰ä¸ªç›¸åŒç‚¹å’Œä¸‰ä¸ªä¸åŒç‚¹ã€‚"},
    {"question_text": "å“ªäº›è®°å¿†æˆ–é€‰æ‹©æœ€æ·±åˆ»åœ°å¡‘é€ äº†ä»Šå¤©çš„æˆ‘ï¼Ÿ",
     "tag": "å›å¿†ä¸é—æ†¾",
     "inspiring_words": "æŒ‘é€‰ä¸€ä¸ªâ€œå¦‚æœå¯ä»¥é‡æ¥â€çš„ç¬é—´ï¼Œåˆ†æä¸ºä»€ä¹ˆå®ƒå¦‚æ­¤å…³é”®ã€‚"},
    {"question_text": "å¦‚æœæœªæ¥çš„æˆ‘èƒ½ç»™ç°åœ¨çš„æˆ‘å†™ä¸€å°ä¿¡ï¼Œä»–/å¥¹æœ€æƒ³æé†’ä»€ä¹ˆï¼Ÿ",
     "tag": "æœªæ¥è‡ªæˆ‘",
     "inspiring_words": "å°è¯•ä»40å²ã€60å²ç”šè‡³ä¸´ç»ˆè§†è§’å†™ä¿¡ï¼Œè§‚å¯Ÿä»·å€¼è§‚çš„å˜åŒ–ã€‚"},
    {"question_text": "æˆ‘æœ‰å“ªäº›é•¿æœŸä¹ æƒ¯æˆ–å°åŠ¨ä½œï¼Œå¯èƒ½æš—ç¤ºç€è¢«å¿½è§†çš„éœ€æ±‚æˆ–ææƒ§ï¼Ÿ",
     "tag": "ä¹ æƒ¯/æƒ¯æ€§",
     "inspiring_words": "ä¾‹å¦‚å’¬æŒ‡ç”²ã€æ‹–å»¶ã€é¢‘ç¹åˆ·æ‰‹æœºèƒŒåçš„å¿ƒç†æœºåˆ¶ã€‚"},
    {"question_text": "åˆ«äººå¯¹æˆ‘çš„è¯„ä»·ä¸­ï¼Œå“ªä¸€å¥è®©æˆ‘åå¤è®°èµ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ",
     "tag": "ä»–äººé•œåƒ",
     "inspiring_words": "å†™ä¸‹3å¥å°è±¡æœ€æ·±çš„è¯„ä»·ï¼Œå‰–æå®ƒä»¬è§¦åŠ¨çš„è‡ªæˆ‘å½¢è±¡ã€‚"},
    {"question_text": "æˆ‘æœ€ä¸æ„¿è¢«åˆ«äººçŸ¥é“çš„æƒ³æ³•æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæ­ç¤ºäº†æˆ‘æ€æ ·çš„å¦ä¸€é¢ï¼Ÿ",
     "tag": "é˜´å½±é¢",
     "inspiring_words": "å¯ä»¥ç”¨ç¬¬ä¸‰äººç§°å†™ä½œï¼Œé™ä½å¿ƒç†é˜²å¾¡ã€‚"},

    # 2ï¸âƒ£ æˆ‘ä¸ä»–äººã€ç¤¾ä¼šçš„å…³ç³»
    {"question_text": "å¦‚æœç”¨ä¸€å¼ å›¾ç”»å‡ºæˆ‘ä¸å®¶äººã€æœ‹å‹ã€åŒäº‹çš„äº²å¯†ç¨‹åº¦ï¼Œå®ƒä¼šæ˜¯ä»€ä¹ˆå½¢çŠ¶ï¼Ÿ",
     "tag": "å…³ç³»åœ°å›¾",
     "inspiring_words": "å°è¯•ç”»â€œåœ†å¿ƒå›¾â€æˆ–â€œåŒå¿ƒåœ†â€ï¼Œè¶Šé è¿‘ä¸­å¿ƒä»£è¡¨è¶Šé‡è¦çš„äººã€‚"},
    {"question_text": "åœ¨å…³ç³»ä¸­ï¼Œæˆ‘æœ€å®³æ€•å¤±å»çš„æ˜¯ä»€ä¹ˆâ€”â€”é™ªä¼´ã€è®¤å¯ã€ç»æµæ”¯æŒã€ç²¾ç¥å…±é¸£ï¼Ÿ",
     "tag": "æƒ…æ„Ÿä¾èµ–",
     "inspiring_words": "å†™å‡ºæœ€è¿‘ä¸€æ¬¡å®³æ€•å¤±å»æŸäººçš„ç»å†ï¼Œæ‹†è§£å…¶ä¸­çš„çœŸå®éœ€æ±‚ã€‚"},
    {"question_text": "æˆ‘åœ¨äº²å¯†å…³ç³»ä¸­æœ€éš¾è®¾ç«‹çš„ç•Œé™æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ",
     "tag": "ç•Œé™æ„Ÿ",
     "inspiring_words": "å†™â€œæˆ‘å¸Œæœ›åˆ«äººä¸è¦åšçš„ä¸‰ä»¶äº‹â€å’Œâ€œæˆ‘æ„¿æ„åšçš„ä¸‰ä»¶äº‹â€ã€‚"},
    {"question_text": "æˆ‘å¦‚ä½•å®šä¹‰â€œçˆ±â€ï¼Ÿå®ƒæ›´åƒè´£ä»»ã€æƒ…æ„Ÿã€è¿˜æ˜¯ä¸€ç§è¡ŒåŠ¨ï¼Ÿ",
     "tag": "çˆ±çš„å®šä¹‰",
     "inspiring_words": "å›é¡¾ä¸€æ®µæœ€éš¾å¿˜çš„çˆ±æƒ…æˆ–äº²æƒ…ï¼Œæç‚¼å…¶ä¸­çš„å…³é”®è¯ã€‚"},
    {"question_text": "æˆ‘ä»å®¶åº­ä¸­ç»§æ‰¿äº†å“ªäº›ä»·å€¼è§‚ï¼Ÿå“ªäº›æˆ‘å·²ç»åæ€æˆ–æ‹’ç»ï¼Ÿ",
     "tag": "åŸç”Ÿå®¶åº­",
     "inspiring_words": "åˆ—å‡ºä¸‰ä¸ªâ€œæˆ‘åƒçˆ¶æ¯â€çš„åœ°æ–¹å’Œä¸‰ä¸ªâ€œæˆ‘å®Œå…¨ä¸åŒâ€çš„åœ°æ–¹ã€‚"},
    {"question_text": "æœ‹å‹åœ¨æˆ‘çš„ç”Ÿå‘½ä¸­æ‰®æ¼”æ€æ ·çš„è§’è‰²ï¼šé™ªä¼´è€…ã€æ€æƒ³ç¢°æ’è€…ã€å®ç”¨åˆä½œä¼™ä¼´ï¼Ÿ",
     "tag": "æœ‹å‹çš„è§’è‰²",
     "inspiring_words": "å†™ä¸‹ä¸‰ä¸ªæœ€é‡è¦æœ‹å‹çš„å…±åŒç‰¹è´¨ï¼Œçœ‹æ˜¯å¦æ˜ å°„å‡ºä½ çš„éœ€æ±‚ã€‚"},
    {"question_text": "æˆ‘åœ¨ç¤¾ä¼šä¸­æ‰®æ¼”å“ªäº›è§’è‰²ï¼Ÿå“ªä¸€ä¸ªæœ€æ¥è¿‘çœŸå®çš„æˆ‘ï¼Ÿ",
     "tag": "ç¤¾ä¼šèº«ä»½",
     "inspiring_words": "ç”¨ç¬¬ä¸€äººç§°å†™å‡ºâ€œæˆ‘æ˜¯â€¦â€¦ä½†æˆ‘æ›´æƒ³æˆä¸ºâ€¦â€¦â€çš„å¥å­ã€‚"},
    {"question_text": "åœ¨å·¥ä½œã€å®¶åº­å’Œç¤¾ä¼šä¸­ï¼Œæˆ‘è®¤ä¸ºè‡ªå·±æœ€ä¸å¯æ¨å¸çš„è´£ä»»æ˜¯ä»€ä¹ˆï¼Ÿ",
     "tag": "è´£ä»»æ„Ÿ",
     "inspiring_words": "ä»æœ€å…·ä½“çš„å°è´£ä»»å¼€å§‹ï¼Œä¾‹å¦‚â€œé™ªä¼´å®¶äººâ€æˆ–â€œç¼´çº³ç¨æ¬¾â€ã€‚"},
    {"question_text": "æˆ‘å¦‚ä½•ç†è§£â€œè‡ªç”±â€ï¼Ÿå®ƒæ„å‘³ç€æ²¡æœ‰çº¦æŸï¼Œè¿˜æ˜¯è‡ªæˆ‘çº¦æŸçš„èƒ½åŠ›ï¼Ÿ",
     "tag": "æƒåŠ›ä¸è‡ªç”±",
     "inspiring_words": "æ€è€ƒä¸€ä¸ªæ›¾è®©ä½ æ„Ÿåˆ°â€œçœŸæ­£è‡ªç”±â€çš„ç¬é—´ï¼Œå¹¶åˆ†æåŸå› ã€‚"},
    {"question_text": "æˆ‘å¦‚ä½•çœ‹å¾…â€œå…¬å¹³â€ä¸â€œå¹³ç­‰â€ï¼Ÿä¸¤è€…æ˜¯å¦æ€»èƒ½å¹¶å­˜ï¼Ÿ",
     "tag": "æ­£ä¹‰è§‚",
     "inspiring_words": "é€‰ä¸€ä¸ªå…·ä½“ç¤¾ä¼šè®®é¢˜ï¼ˆè´«å¯Œå·®è·ã€æ€§åˆ«å¹³æƒã€ç¯å¢ƒä¿æŠ¤ï¼‰æ¥å›åº”ã€‚"},
    {"question_text": "æˆ‘æ˜¯å¦æ„¿æ„ä¸ºæŸä¸ªä¿¡å¿µä»˜å‡ºä»£ä»·ï¼ˆæ—¶é—´ã€é‡‘é’±ã€å…³ç³»ï¼‰ï¼Ÿ",
     "tag": "ç«‹åœºä¸è¡ŒåŠ¨",
     "inspiring_words": "å›å¿†ä¸€æ¬¡å› ä»·å€¼è§‚è€Œä¸ä»–äººäº§ç”Ÿå†²çªçš„ç»å†ã€‚"},
    {"question_text": "æˆ‘æ›´å€¾å‘äºä½œä¸ºç‹¬ç«‹ä¸ªä½“å­˜åœ¨ï¼Œè¿˜æ˜¯ç¾¤ä½“çš„ä¸€å‘˜ï¼Ÿ",
     "tag": "ç¾¤ä½“è®¤åŒ",
     "inspiring_words": "å†™ä¸‹è®©ä½ æ„Ÿåˆ°â€œå½’å±â€æˆ–â€œç–ç¦»â€çš„ç¤¾ä¼šåœºæ™¯ã€‚"},
    {"question_text": "ä»–äººçš„è¯„ä»·åœ¨å¤šå¤§ç¨‹åº¦ä¸Šå½±å“æˆ‘çš„è‡ªæˆ‘è®¤åŒï¼Ÿ",
     "tag": "è¯„ä»·çš„åŠ›é‡",
     "inspiring_words": "å†™ä¸‹ä¸‰å¥æœ€å½±å“ä½ çš„èµç¾æˆ–æ‰¹è¯„ï¼Œå¹¶åˆ†ææƒ…ç»ªååº”ã€‚"},
    {"question_text": "æˆ‘å¦‚ä½•é¢å¯¹ä¸ä»–äººçš„åˆ†æ­§ï¼Ÿæ›´å€¾å‘äºå¦¥åè¿˜æ˜¯åšæŒï¼Ÿ",
     "tag": "å†²çªä¸å’Œè§£",
     "inspiring_words": "ä¸¾ä¸€ä¾‹ä½ æ›¾ä¸»åŠ¨å’Œè§£æˆ–é€‰æ‹©ç¦»å¼€çš„ç»å†ã€‚"},
    {"question_text": "æˆ‘æœ€è®¨åŒä»–äººçš„å“ªç§ç‰¹è´¨ï¼Ÿè¿™ç§ç‰¹è´¨æ˜¯å¦åœ¨æˆ‘è‡ªå·±èº«ä¸Šä¹Ÿå­˜åœ¨ï¼Ÿ",
     "tag": "æŠ•å°„æ•ˆåº”",
     "inspiring_words": "ç”¨ç¬¬ä¸‰äººç§°å†™â€œæŸäººè®©æˆ‘ç”Ÿæ°”ï¼Œå› ä¸ºâ€¦â€¦â€ï¼Œå†æ›¿æ¢æˆâ€œæˆ‘è‡ªå·±æœ‰æ—¶ä¹Ÿâ€¦â€¦â€ã€‚"},

    # 3ï¸âƒ£ äººç”Ÿæ„ä¹‰ä¸å­˜åœ¨
    {"question_text": "å¦‚æœç”Ÿå‘½æœ¬èº«æ²¡æœ‰é¢„è®¾æ„ä¹‰ï¼Œæˆ‘æ„¿æ„èµ‹äºˆå®ƒæ€æ ·çš„ä¸ªäººæ„ä¹‰ï¼Ÿ",
     "tag": "æ„ä¹‰è¿½é—®",
     "inspiring_words": "æƒ³è±¡å®‡å®™å†·æ¼ æ— å£°ï¼Œä½ ä¾ç„¶é€‰æ‹©æ´»ä¸‹å»çš„ç†ç”±æ˜¯ä»€ä¹ˆï¼Ÿ"},
    {"question_text": "å¦‚æœå¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬æˆ‘æ­¤ç”Ÿæœ€æƒ³å®Œæˆçš„äº‹ï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆï¼Ÿ",
     "tag": "ç»ˆæç›®æ ‡",
     "inspiring_words": "å¯ä»¥æ˜¯å…·ä½“æˆå°±ï¼Œä¹Ÿå¯ä»¥æ˜¯ç²¾ç¥çŠ¶æ€ï¼ˆä¾‹å¦‚â€œæˆä¸ºä¸€ä¸ªå–„è‰¯çš„äººâ€ï¼‰ã€‚"},
    {"question_text": "æˆ‘å¦‚ä½•å®šä¹‰â€œå¹¸ç¦â€ä¸â€œæˆåŠŸâ€ï¼Ÿå®ƒä»¬æ˜¯è¿‡ç¨‹è¿˜æ˜¯ç»“æœï¼Ÿ",
     "tag": "å¹¸ç¦/æˆåŠŸ",
     "inspiring_words": "å›å¿†ä¸€ä¸ªæœ€å¹¸ç¦çš„ç¬é—´å’Œä¸€ä¸ªæœ€æˆåŠŸçš„æ—¶åˆ»ï¼Œæ¯”è¾ƒä¸¤è€…çš„æƒ…æ„Ÿå·®å¼‚ã€‚"},
    {"question_text": "å¦‚æœäººç”Ÿæ²¡æœ‰ç»å¯¹æ„ä¹‰ï¼Œæˆ‘æ˜¯å¦èƒ½ä»â€œæ— æ„ä¹‰â€ä¸­æ„Ÿå—åˆ°è§£æ”¾ï¼Ÿ",
     "tag": "è’è¯ä¸è‡ªç”±",
     "inspiring_words": "å¯ä»¥å€Ÿé‰´åŠ ç¼ªçš„â€œè¥¿è¥¿å¼—ç¥è¯â€æ¥åæ€ï¼šå³ä½¿æ¨çŸ³å¤´æ¯«æ— ç»ˆç‚¹ï¼Œæˆ‘ä»¬ä¸ºä½•ç»§ç»­ï¼Ÿ"},
    {"question_text": "çœŸæ­£çš„è‡ªç”±æ˜¯å¦éœ€è¦æ‰¿æ‹…å­¤ç‹¬å’Œè´£ä»»ï¼Ÿæˆ‘æ„¿æ„ä¸ºè‡ªç”±æ”¾å¼ƒä»€ä¹ˆï¼Ÿ",
     "tag": "è‡ªç”±çš„ä»£ä»·",
     "inspiring_words": "å†™ä¸‹ä¸‰ä»¶ä½ æ›¾ä¸ºäº†ç‹¬ç«‹è€Œæ‹’ç»çš„äº‹æˆ–äººã€‚"},
    {"question_text": "æˆ‘æœ€è‰°éš¾çš„é€‰æ‹©æ˜¯ä»€ä¹ˆï¼Ÿå½“æ—¶æ˜¯å¦‚ä½•æƒè¡¡æ„ä¹‰ä¸ç°å®çš„ï¼Ÿ",
     "tag": "é€‰æ‹©çš„å‹‡æ°”",
     "inspiring_words": "å›é¡¾ä¸€æ¬¡â€œæ”¹å˜äººç”Ÿæ–¹å‘â€çš„å†³å®šï¼Œå¦‚æ¢å·¥ä½œã€ç§»å±…ã€åˆ†æ‰‹ã€‚"},
    {"question_text": "æˆ‘å¦‚ä½•çœ‹å¾…æ­»äº¡ï¼Ÿå®ƒè®©æˆ‘ææƒ§ã€é‡Šç„¶ï¼Œè¿˜æ˜¯éº»æœ¨ï¼Ÿ",
     "tag": "æ­»äº¡è§‚",
     "inspiring_words": "æƒ³è±¡ç”Ÿå‘½åªå‰©ä¸€å¹´ï¼Œä½ ä¼šåšä»€ä¹ˆï¼Ÿ"},
    {"question_text": "å¦‚æœæ˜å¤©ç”Ÿå‘½ç»“æŸï¼Œæˆ‘å¸Œæœ›åˆ«äººå¦‚ä½•è®°ä½æˆ‘ï¼Ÿ",
     "tag": "é—äº§ä¸ç—•è¿¹",
     "inspiring_words": "å°è¯•å†™ä¸€ç¯‡â€œè‡ªå·±çš„å¢“å¿—é“­â€æˆ–â€œä¸´ç»ˆé—è¨€â€ã€‚"},
    {"question_text": "æˆ‘æœ€æ·±åˆ»æ„Ÿå—åˆ°ç”Ÿå‘½æ— å¸¸çš„æ—¶åˆ»æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæ”¹å˜äº†æˆ‘çš„å“ªäº›çœ‹æ³•ï¼Ÿ",
     "tag": "æ— å¸¸ä½“éªŒ",
     "inspiring_words": "å¯ä»¥æ˜¯ä¸€æ¬¡å¤±å»ã€ç–¾ç—…ã€ç¾éš¾ï¼Œæˆ–ä¸€æ¬¡å¶ç„¶çš„é†’æ‚Ÿã€‚"},
    {"question_text": "å¦‚æœå¹¸ç¦ä¸é“å¾·å‘ç”Ÿå†²çªï¼Œæˆ‘ä¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ",
     "tag": "å–„çš„é€‰æ‹©",
     "inspiring_words": "æƒ³è±¡ä¸€ä¸ªæƒ…æ™¯ï¼šä¸ºäº†ä¿æŠ¤æ‰€çˆ±çš„äººï¼Œéœ€è¦è¯´è°æˆ–è¿æ³•ï¼Œä½ ä¼šå¦‚ä½•å†³å®šï¼Ÿ"},
    {"question_text": "æˆ‘æ˜¯å¦æœ‰ä¸€å¥—â€œæ— è®ºå¦‚ä½•éƒ½åšæŒâ€çš„åŸåˆ™ï¼Ÿå®ƒä»¬æ˜¯å¦‚ä½•å½¢æˆçš„ï¼Ÿ",
     "tag": "äººç”Ÿå‡†åˆ™",
     "inspiring_words": "åˆ—å‡º3æ¡â€œåº•çº¿â€ï¼Œå›é¡¾å®ƒä»¬åœ¨ä¸åŒæƒ…å¢ƒä¸‹æ˜¯å¦è¢«æŒ‘æˆ˜ã€‚"},
    {"question_text": "æˆ‘ç›¸ä¿¡â€œä¸ºä»–äººè€Œæ´»â€èƒ½å¸¦æ¥æ„ä¹‰å—ï¼Ÿ",
     "tag": "åˆ©ä»–ä¸è‡ªåˆ©",
     "inspiring_words": "å†™ä¸‹ä½ æ›¾ç»çš„æ— ç§è¡Œä¸ºä¸çº¯ç²¹è‡ªç§çš„è¡Œä¸ºï¼Œå¹¶æ¯”è¾ƒä¸¤è€…å¸¦æ¥çš„æ„Ÿå—ã€‚"},
    {"question_text": "æˆ‘å¦‚ä½•åœ¨æœ‰é™çš„æ—¶é—´é‡Œä½“éªŒâ€œå½“ä¸‹â€ï¼Ÿ",
     "tag": "æ´»åœ¨å½“ä¸‹",
     "inspiring_words": "æè¿°æœ€è¿‘ä¸€æ¬¡å®Œå…¨æŠ•å…¥å½“ä¸‹ã€å¿˜è®°æ—¶é—´çš„ç»å†ã€‚"},
    {"question_text": "æˆ‘å¸Œæœ›5å¹´ã€10å¹´åçš„äººç”Ÿæ˜¯ä»€ä¹ˆæ ·ï¼Ÿ",
     "tag": "é•¿è¿œæ„¿æ™¯",
     "inspiring_words": "ä¸å¿…å®Œç¾è§„åˆ’ï¼Œåªéœ€æç»˜æ ¸å¿ƒçŠ¶æ€ï¼ˆä¾‹å¦‚â€œå†…å¿ƒå¹³å’Œâ€æˆ–â€œæŒç»­å­¦ä¹ â€ï¼‰ã€‚"},
    {"question_text": "å¦‚æœç”Ÿå‘½å¯ä»¥æ— é™å»¶é•¿ï¼Œæˆ‘çš„ç”Ÿæ´»æ–¹å¼ä¼šæ”¹å˜å—ï¼Ÿ",
     "tag": "æ— é™æƒ³è±¡",
     "inspiring_words": "æ€è€ƒâ€œæ°¸ç”Ÿâ€æ˜¯å¦çœŸèƒ½å¸¦æ¥æ„ä¹‰è¿˜æ˜¯è®©ä¸€åˆ‡å¤±å»ä»·å€¼ã€‚"},
    {"question_text": "åœ¨æ— è¾¹çš„å®‡å®™ä¸äº¿ä¸‡å¹´çš„æ—¶é—´é‡Œï¼Œæˆ‘çš„å­˜åœ¨æ„å‘³ç€ä»€ä¹ˆï¼Ÿ",
     "tag": "å®‡å®™å°ºåº¦",
     "inspiring_words": "å†™ä¸‹ä»å¤©æ–‡å­¦ã€è‡ªç„¶æˆ–å¤œç©ºä¸­è·å¾—çš„æ„Ÿå—ï¼šæ¸ºå°ã€éœ‡æ’¼ã€å®‰æ…°æˆ–ææƒ§ã€‚"},
    {"question_text": "æˆ‘æ˜¯å¦éœ€è¦æŸç§ä¿¡ä»°æˆ–å“²å­¦ä½“ç³»æ¥æ”¯æ’‘æ„ä¹‰ï¼Ÿ",
     "tag": "å®—æ•™/ä¿¡ä»°",
     "inspiring_words": "å¯ä»¥ä»å®—æ•™ã€ç§‘å­¦ã€äººæ–‡ä¸»ä¹‰ç­‰è§’åº¦æ¯”è¾ƒå…¶ç»™äºˆçš„æ…°è—‰ã€‚"},

    # 4ï¸âƒ£ è¡ŒåŠ¨ä¸å®è·µ
    {"question_text": "æˆ‘ç†æƒ³ä¸­çš„ä¸€å¤©æ˜¯æ€æ ·åº¦è¿‡çš„ï¼Ÿç°å®ä¸ç†æƒ³å·®è·åœ¨å“ªé‡Œï¼Ÿ",
     "tag": "ç”Ÿæ´»èŠ‚å¥",
     "inspiring_words": "å†™ä¸‹â€œç†æƒ³çš„ä¸€å¤©â€æ—¶é—´è¡¨ï¼Œå¯¹æ¯”çœŸå®çš„ä¸€å¤©ï¼Œæ‰¾å‡ºå¯è°ƒæ•´çš„å°ç¯èŠ‚ã€‚"},
    {"question_text": "å“ªäº›æ—¥å¸¸ä¹ æƒ¯æœ€èƒ½æ”¯æ’‘æˆ‘çš„ç²¾ç¥çŠ¶æ€ï¼Ÿå“ªäº›ä¹ æƒ¯æ­£åœ¨æ¶ˆè€—æˆ‘ï¼Ÿ",
     "tag": "ä¹ æƒ¯çš„åŠ›é‡",
     "inspiring_words": "åˆ—å‡ºâ€œç»™æˆ‘èƒ½é‡çš„ä¸‰ä»¶å°äº‹â€å’Œâ€œè®©æˆ‘ç–²æƒ«çš„ä¸‰ä»¶å°äº‹â€ã€‚"},
    {"question_text": "æˆ‘æ˜¯å¦æœ‰èƒ½è®©æ—¥å¸¸å˜å¾—æ›´æœ‰æ„ä¹‰çš„ä»ªå¼ï¼Ÿ",
     "tag": "ä»ªå¼æ„Ÿ",
     "inspiring_words": "æ¯”å¦‚å†™æ—¥è®°ã€æ™¨è·‘ã€å†¥æƒ³ã€å®¶åº­æ™šé¤â€”â€”å“ªä¸€ä»¶æ˜¯æˆ‘æƒ³åšæŒçš„ï¼Ÿ"},
    {"question_text": "å½“é¢å¯¹é€‰æ‹©æ—¶ï¼Œæˆ‘æœ€å¸¸ä¾é çš„åˆ¤æ–­æ ‡å‡†æ˜¯ä»€ä¹ˆï¼šåˆ©ç›Šã€æƒ…æ„Ÿã€é“å¾·è¿˜æ˜¯ç›´è§‰ï¼Ÿ",
     "tag": "è¡ŒåŠ¨æ ‡å‡†",
     "inspiring_words": "å›é¡¾ä¸€æ¬¡æœ€è¿‘çš„é‡å¤§å†³ç­–ï¼Œå†™ä¸‹å½“æ—¶çš„å¿ƒç†æƒé‡ã€‚"},
    {"question_text": "ä¸ºäº†é è¿‘ç†æƒ³äººç”Ÿï¼Œæˆ‘ä»Šå¤©èƒ½é‡‡å–çš„æœ€å°è¡ŒåŠ¨æ˜¯ä»€ä¹ˆï¼Ÿ",
     "tag": "æœ€å°è¡ŒåŠ¨",
     "inspiring_words": "å°½é‡å…·ä½“åˆ°â€œ15åˆ†é’Ÿä»¥å†…å¯ä»¥å®Œæˆâ€çš„ä»»åŠ¡ã€‚"},
    {"question_text": "æˆ‘æœ€å®¹æ˜“æ‹–å»¶çš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼ŸèƒŒåçš„ææƒ§æˆ–é˜»åŠ›æ˜¯ä»€ä¹ˆï¼Ÿ",
     "tag": "æ‹–å»¶ä¸ææƒ§",
     "inspiring_words": "å†™ä¸‹è¿‡å»ä¸€å‘¨è¢«åå¤æ¨è¿Ÿçš„ä»»åŠ¡ï¼Œå¹¶åˆ†ææƒ…ç»ªåŸå› ã€‚"},
    {"question_text": "æˆ‘å¸Œæœ›åœ¨æœªæ¥å‡ å¹´æŒæ¡å“ªäº›çŸ¥è¯†æˆ–æŠ€èƒ½ï¼Ÿ",
     "tag": "ç»ˆèº«å­¦ä¹ ",
     "inspiring_words": "å°†å…´è¶£åˆ†ä¸ºâ€œç«‹å³å®è·µå‹â€å’Œâ€œé•¿æœŸç§¯ç´¯å‹â€ï¼Œä¾‹å¦‚ï¼šçƒ¹é¥ª vs. è¯­è¨€ã€‚"},
    {"question_text": "æˆ‘æœ€ç—›è‹¦ä½†æœ€æœ‰ä»·å€¼çš„æˆé•¿ç»å†æ˜¯ä»€ä¹ˆï¼Ÿ",
     "tag": "æˆé•¿ç—›",
     "inspiring_words": "å›å¿†ä¸€ä¸ªå¤±è´¥ç»å†ï¼Œæç‚¼å…¶ä¸­çš„æ•™è®­å’Œæ„å¤–æ”¶è·ã€‚"},
    {"question_text": "æˆ‘å¦‚ä½•ä»ä»–äººæˆ–ç¯å¢ƒä¸­è·å–åé¦ˆå¹¶æ”¹è¿›ï¼Ÿ",
     "tag": "åé¦ˆå¾ªç¯",
     "inspiring_words": "æè¿°æœ€è¿‘ä¸€æ¬¡å› ä¸ºä»–äººå»ºè®®è€Œæ”¹å˜ä¹ æƒ¯çš„æ¡ˆä¾‹ã€‚"},
    {"question_text": "æˆ‘å¦‚ä½•åœ¨æ—¥å¸¸é€‰æ‹©ä¸­ä½“ç°è‡ªå·±çš„ä»·å€¼è§‚ï¼Ÿ",
     "tag": "ä»·å€¼è½åœ°",
     "inspiring_words": "ä¾‹å¦‚æ¶ˆè´¹é€‰æ‹©ï¼ˆç¯ä¿ã€å…¬ç›Šï¼‰ã€äººé™…äº¤å¾€ï¼ˆè¯šä¿¡ã€å–„æ„ï¼‰ã€‚"},
    {"question_text": "å½“ä»·å€¼è§‚ä¸ç°å®åˆ©ç›Šå†²çªæ—¶ï¼Œæˆ‘ä¼šå¦‚ä½•å–èˆï¼Ÿ",
     "tag": "çŸ›ç›¾æ—¶åˆ»",
     "inspiring_words": "å›é¡¾ä¸€æ¬¡â€œçŸ¥é“æ­£ç¡®ä½†éš¾ä»¥åšæŒâ€çš„æƒ…å¢ƒã€‚"},
    {"question_text": "æˆ‘æ„¿æ„é€šè¿‡å“ªäº›æ–¹å¼å¯¹ç¤¾ä¼šåšå‡ºè´¡çŒ®ï¼Ÿ",
     "tag": "ç¤¾ä¼šå‚ä¸",
     "inspiring_words": "ä»å°åˆ°å¤§éƒ½å¯ï¼Œå¦‚å¿—æ„¿æ´»åŠ¨ã€ç¤¾åŒºäº¤æµã€ç¯ä¿ä¹ æƒ¯ã€‚"},
    {"question_text": "å½“é‡åˆ°å·¨å¤§å‹åŠ›æˆ–æŒ«æŠ˜æ—¶ï¼Œæˆ‘æœ€æœ‰æ•ˆçš„è‡ªæˆ‘å®‰æŠšæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ",
     "tag": "åº”å¯¹å‹åŠ›",
     "inspiring_words": "åˆ—å‡ºä¸‰ç§â€œæˆ‘æ›¾ç”¨è¿‡ä¸”æœ‰æ•ˆâ€çš„ç­–ç•¥ï¼Œå¦‚è¿åŠ¨ã€å€¾è¯‰ã€å†™ä½œã€‚"},
    {"question_text": "æˆ‘ä¸Šä¸€æ¬¡æ„Ÿåˆ°å®Œå…¨å¤±æ§æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿå¦‚ä½•æ¢å¤å¹³è¡¡ï¼Ÿ",
     "tag": "å¤±æ§ä½“éªŒ",
     "inspiring_words": "å¤ç›˜æƒ…å¢ƒã€æƒ…ç»ªã€æ¢å¤è¿‡ç¨‹ï¼Œæ‰¾å‡ºå¯å¤åˆ¶çš„è°ƒèŠ‚æœºåˆ¶ã€‚"},
    {"question_text": "æˆ‘æœ€éš¾åŸè°…è‡ªå·±çš„å“ªä»¶äº‹ï¼Ÿæˆ‘å¯ä»¥å¦‚ä½•é‡æ–°ä¸è‡ªå·±å’Œè§£ï¼Ÿ",
     "tag": "è‡ªæˆ‘å®½æ•",
     "inspiring_words": "å°è¯•å†™ä¸€å°â€œç»™è¿‡å»çš„æˆ‘â€çš„å®½æ•ä¿¡ã€‚"},
    {"question_text": "äº”å¹´åï¼Œæˆ‘å¸Œæœ›åœ¨ç”Ÿæ´»çš„äº”ä¸ªé¢†åŸŸï¼ˆå¥åº·ã€å…³ç³»ã€äº‹ä¸šã€ç²¾ç¥ã€å…´è¶£ï¼‰å„å¤„äºä½•ç§çŠ¶æ€ï¼Ÿ",
     "tag": "äº”å¹´å›¾æ™¯",
     "inspiring_words": "æ¯ä¸ªé¢†åŸŸå†™ä¸‹ä¸€ä¸ªå…³é”®è¯ï¼Œå¦‚â€œå¹³è¡¡â€â€œæ¢ç´¢â€â€œç¨³å®šâ€ã€‚"},
    {"question_text": "å¦‚æœæˆ‘ä¸åšä»»ä½•æ”¹å˜ï¼Œäº”å¹´åæˆ‘å¯èƒ½ä¼šåæ‚”ä»€ä¹ˆï¼Ÿ",
     "tag": "é€†å‘æ€è€ƒ",
     "inspiring_words": "å†™ä¸‹ä¸‰ä¸ªâ€œæœªæ¥å¯èƒ½çš„é—æ†¾â€ä»¥æ¿€å‘è¡ŒåŠ¨ã€‚"},
    {"question_text": "æˆ‘å¯ä»¥ç”¨ä»€ä¹ˆæ–¹æ³•å®šæœŸå®¡è§†å¹¶è°ƒæ•´äººç”Ÿæ–¹å‘ï¼Ÿ",
     "tag": "æŒç»­ä¼˜åŒ–",
     "inspiring_words": "ä¾‹å¦‚æ¯æœˆå›é¡¾ã€å¹´åº¦è®¡åˆ’ã€ä¸æœ‹å‹/ä¼´ä¾£çš„æ·±åº¦å¯¹è¯ã€‚"}
]

def check_database_exists():
    """æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨"""
    if DATABASE_URL.startswith("sqlite:///"):
        db_path = DATABASE_URL.replace("sqlite:///", "")
        return os.path.exists(db_path)
    return True  # é SQLite æ•°æ®åº“å‡è®¾å­˜åœ¨


def init_db():
    """åˆ›å»ºæ•°æ®åº“è¡¨"""
    print("ğŸ“¦ æ­£åœ¨åˆ›å»ºæ•°æ®åº“è¡¨...")
    Base.metadata.create_all(bind=engine)
    print("âœ… æ•°æ®åº“è¡¨åˆ›å»ºå®Œæˆ")


def insert_questions():
    """æ‰¹é‡æ’å…¥é—®é¢˜"""
    db = SessionLocal()
    try:
        # æ£€æŸ¥æ˜¯å¦å·²æœ‰æ•°æ®
        existing_count = db.query(Question).count()
        if existing_count > 0:
            print(f"âš ï¸  æ•°æ®åº“ä¸­å·²æœ‰ {existing_count} ä¸ªé—®é¢˜")
            choice = input("æ˜¯å¦ç»§ç»­æ·»åŠ æ–°é—®é¢˜ï¼Ÿ(y/n): ").lower()
            if choice != 'y':
                print("âŒ å–æ¶ˆå¯¼å…¥")
                return

        # æ‰¹é‡æ’å…¥
        added_count = 0
        for q in questions_with_meta:
            question = Question(
                id=str(uuid4()),
                tag=q["tag"],
                inspiring_words=q["inspiring_words"],
                question_text=q["question_text"],
                created_by=None,
                is_public=True,  # âœ… æ”¹ä¸ºå…¬å¼€ï¼Œè¿™æ · daily-questions å¯ä»¥ä½¿ç”¨
                created_at=datetime.utcnow()
            )
            db.add(question)
            added_count += 1

        db.commit()
        print(f"âœ… æˆåŠŸå¯¼å…¥ {added_count} ä¸ªé—®é¢˜åˆ°æ•°æ®åº“ï¼")
        
        # æ˜¾ç¤ºæ€»æ•°
        total_count = db.query(Question).count()
        print(f"ğŸ“Š æ•°æ®åº“ä¸­ç°åœ¨å…±æœ‰ {total_count} ä¸ªé—®é¢˜")

    except Exception as e:
        db.rollback()
        print(f"âŒ å¯¼å…¥å¤±è´¥: {e}")
        raise
    finally:
        db.close()


def main():
    """ä¸»å‡½æ•°"""
    print("=" * 60)
    print("ğŸš€ å“²æ€æ—¥è®° - é—®é¢˜å¯¼å…¥å·¥å…·")
    print("=" * 60)
    print()

    # æ£€æŸ¥æ•°æ®åº“
    if not check_database_exists():
        print("ğŸ“ æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºæ–°æ•°æ®åº“")
    
    # åˆå§‹åŒ–æ•°æ®åº“
    init_db()
    print()

    # å¯¼å…¥é—®é¢˜
    insert_questions()
    print()
    print("=" * 60)
    print("âœ¨ å®Œæˆï¼ä½ ç°åœ¨å¯ä»¥å¯åŠ¨åº”ç”¨äº†")
    print("=" * 60)


if __name__ == "__main__":
    main()